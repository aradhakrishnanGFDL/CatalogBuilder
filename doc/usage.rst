Usage
============

Catalogs generated by catalog builder can be ingested using Intake-ESM

What is Intake-ESM?
----------------------

How do I use Intake-ESM to ingest a catalog?
--------------------------------------------

**Import needed packages**
import xarray as xr
import intake
import intake_esm
import os    

**Set col_url variable to JSON path**

col_url = "<path-to-JSON>"

Ex: col_url = "../catalogs/gfdl_eg/from_gfdlbuilder/gfdl_spec.json"

col = intake.open_esm_datastore(col_url)

**Example to searching a catalog**
#Examples to just search for what we want from the catalog
expname_filter = ['ESM4_1pctCO2_D1']
modeling_realm = 'atmos'
model_filter = 'ESM4'
variable_id_filter = "evap"
ens_filter = "r1i1p1f1"
frequency = "monthly"
chunk_freq = "5yr" #assuming we have 10 yr also, this will give unique ones

cat = col.search(experiment_id=expname_filter,frequency=frequency,modeling_realm=modeling_realm,
                 source_id=model_filter,variable_id=variable_id_filter)

cat.df["path"][0]

This will return:
'/archive/oar.gfdl.cmip6/ESM4/DECK/ESM4_1pctCO2_D1/gfdl.ncrc4-intel16-prod-openmp/pp/atmos/ts/monthly/5yr/atmos.000101-000512.evap.nc'



